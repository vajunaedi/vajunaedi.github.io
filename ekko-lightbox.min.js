/*
 Lightbox for Bootstrap by @ashleydw
 https://github.com/ashleydw/lightbox

 License: https://github.com/ashleydw/lightbox/blob/master/LICENSE
*/
+function(q){var p=function(){function e(e,k){for(var h=0;h<k.length;h++){var f=k[h];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(e,f.key,f)}}return function(m,k,h){k&&e(m.prototype,k);h&&e(m,h);return m}}();(function(e){var m=e.fn.ekkoLightbox,k={title:"",footer:"",maxWidth:9999,maxHeight:9999,showArrows:!0,wrapping:!0,type:null,alwaysShowClose:!1,loadingMessage:'<div class="ekko-lightbox-loader"><div><div></div><div></div></div></div>',leftArrow:"<span>&#10094;</span>",
rightArrow:"<span>&#10095;</span>",strings:{close:"Close",fail:"Failed to load image:",type:"Could not detect remote target type. Force the type using data-type"},doc:document,onShow:function(){},onShown:function(){},onHide:function(){},onHidden:function(){},onNavigate:function(){},onContentLoaded:function(){}},h=function(){function f(a,c){var b=this;if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this._config=e.extend({},k,c);this._$modalArrows=null;this._galleryIndex=
0;this._border=this._padding=this._galleryName=null;this._footerIsShown=this._titleIsShown=!1;this._touchendX=this._touchstartX=this._wantedHeight=this._wantedWidth=0;this._modalId="ekkoLightbox-"+Math.floor(1E3*Math.random()+1);this._$element=a instanceof jQuery?a:e(a);this._isBootstrap3=3==e.fn.modal.Constructor.VERSION[0];var d='<h4 class="modal-title">'+(this._config.title||"&nbsp;")+"</h4>",g='<button type="button" class="close" data-dismiss="modal" aria-label="'+this._config.strings.close+'"><span aria-hidden="true">&times;</span></button>';
d='<div class="modal-dialog" role="document"><div class="modal-content">'+('<div class="modal-header'+(this._config.title||this._config.alwaysShowClose?"":" hide")+'">'+(this._isBootstrap3?g+d:d+g)+"</div>")+'<div class="modal-body"><div class="ekko-lightbox-container"><div class="ekko-lightbox-item fade in show"></div><div class="ekko-lightbox-item fade"></div></div></div>'+('<div class="modal-footer'+(this._config.footer?"":" hide")+'">'+(this._config.footer||"&nbsp;")+"</div>")+"</div></div>";
e(this._config.doc.body).append('<div id="'+this._modalId+'" class="ekko-lightbox modal fade" tabindex="-1" tabindex="-1" role="dialog" aria-hidden="true">'+d+"</div>");this._$modal=e("#"+this._modalId,this._config.doc);this._$modalDialog=this._$modal.find(".modal-dialog").first();this._$modalContent=this._$modal.find(".modal-content").first();this._$modalBody=this._$modal.find(".modal-body").first();this._$modalHeader=this._$modal.find(".modal-header").first();this._$modalFooter=this._$modal.find(".modal-footer").first();
this._$lightboxContainer=this._$modalBody.find(".ekko-lightbox-container").first();this._$lightboxBodyOne=this._$lightboxContainer.find("> div:first-child").first();this._$lightboxBodyTwo=this._$lightboxContainer.find("> div:last-child").first();this._border=this._calculateBorders();this._padding=this._calculatePadding();if(this._galleryName=this._$element.data("gallery"))this._$galleryItems=e(document.body).find('*[data-gallery="'+this._galleryName+'"]'),this._galleryIndex=this._$galleryItems.index(this._$element),
e(document).on("keydown.ekkoLightbox",this._navigationalBinder.bind(this)),this._config.showArrows&&1<this._$galleryItems.length&&(this._$lightboxContainer.append('<div class="ekko-lightbox-nav-overlay"><a href="#">'+this._config.leftArrow+'</a><a href="#">'+this._config.rightArrow+"</a></div>"),this._$modalArrows=this._$lightboxContainer.find("div.ekko-lightbox-nav-overlay").first(),this._$lightboxContainer.on("click","a:first-child",function(a){a.preventDefault();return b.navigateLeft()}),this._$lightboxContainer.on("click",
"a:last-child",function(a){a.preventDefault();return b.navigateRight()}),this.updateNavigation());this._$modal.on("show.bs.modal",this._config.onShow.bind(this)).on("shown.bs.modal",function(){b._toggleLoading(!0);b._handle();return b._config.onShown.call(b)}).on("hide.bs.modal",this._config.onHide.bind(this)).on("hidden.bs.modal",function(){b._galleryName&&(e(document).off("keydown.ekkoLightbox"),e(window).off("resize.ekkoLightbox"));b._$modal.remove();return b._config.onHidden.call(b)}).modal(this._config);
e(window).on("resize.ekkoLightbox",function(){b._resize(b._wantedWidth,b._wantedHeight)});this._$lightboxContainer.on("touchstart",function(){b._touchstartX=event.changedTouches[0].screenX}).on("touchend",function(){b._touchendX=event.changedTouches[0].screenX;b._swipeGesure()})}p(f,null,[{key:"Default",get:function(){return k}}]);p(f,[{key:"element",value:function(){return this._$element}},{key:"modal",value:function(){return this._$modal}},{key:"navigateTo",value:function(a){if(0>a||a>this._$galleryItems.length-
1)return this;this._galleryIndex=a;this.updateNavigation();this._$element=e(this._$galleryItems.get(this._galleryIndex));this._handle()}},{key:"navigateLeft",value:function(){if(this._$galleryItems&&1!==this._$galleryItems.length){if(0===this._galleryIndex)if(this._config.wrapping)this._galleryIndex=this._$galleryItems.length-1;else return;else this._galleryIndex--;this._config.onNavigate.call(this,"left",this._galleryIndex);return this.navigateTo(this._galleryIndex)}}},{key:"navigateRight",value:function(){if(this._$galleryItems&&
1!==this._$galleryItems.length){if(this._galleryIndex===this._$galleryItems.length-1)if(this._config.wrapping)this._galleryIndex=0;else return;else this._galleryIndex++;this._config.onNavigate.call(this,"right",this._galleryIndex);return this.navigateTo(this._galleryIndex)}}},{key:"updateNavigation",value:function(){if(!this._config.wrapping){var a=this._$lightboxContainer.find("div.ekko-lightbox-nav-overlay");0===this._galleryIndex?a.find("a:first-child").addClass("disabled"):a.find("a:first-child").removeClass("disabled");
this._galleryIndex===this._$galleryItems.length-1?a.find("a:last-child").addClass("disabled"):a.find("a:last-child").removeClass("disabled")}}},{key:"close",value:function(){return this._$modal.modal("hide")}},{key:"_navigationalBinder",value:function(a){a=a||window.event;if(39===a.keyCode)return this.navigateRight();if(37===a.keyCode)return this.navigateLeft()}},{key:"_detectRemoteType",value:function(a,c){c=c||!1;!c&&this._isImage(a)&&(c="image");!c&&this._getYoutubeId(a)&&(c="youtube");!c&&this._getVimeoId(a)&&
(c="vimeo");!c&&this._getInstagramId(a)&&(c="instagram");if(!c||0>"image youtube vimeo instagram video url".split(" ").indexOf(c))c="url";return c}},{key:"_isImage",value:function(a){return a&&a.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)}},{key:"_containerToUse",value:function(){var a=this,c=this._$lightboxBodyTwo,b=this._$lightboxBodyOne;this._$lightboxBodyTwo.hasClass("in")&&(c=this._$lightboxBodyOne,b=this._$lightboxBodyTwo);b.removeClass("in show");setTimeout(function(){a._$lightboxBodyTwo.hasClass("in")||
a._$lightboxBodyTwo.empty();a._$lightboxBodyOne.hasClass("in")||a._$lightboxBodyOne.empty()},500);c.addClass("in show");return c}},{key:"_handle",value:function(){var a=this._containerToUse();this._updateTitleAndFooter();var c=this._$element.attr("data-remote")||this._$element.attr("href"),b=this._detectRemoteType(c,this._$element.attr("data-type")||!1);if(0>"image youtube vimeo instagram video url".split(" ").indexOf(b))return this._error(this._config.strings.type);switch(b){case "image":this._preloadImage(c,
a);this._preloadImageByIndex(this._galleryIndex,3);break;case "youtube":this._showYoutubeVideo(c,a);break;case "vimeo":this._showVimeoVideo(this._getVimeoId(c),a);break;case "instagram":this._showInstagramVideo(this._getInstagramId(c),a);break;case "video":this._showHtml5Video(c,a);break;default:this._loadRemoteContent(c,a)}return this}},{key:"_getYoutubeId",value:function(a){return a?(a=a.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&\?]*).*/))&&11===a[2].length?a[2]:!1:!1}},{key:"_getVimeoId",
value:function(a){return a&&0<a.indexOf("vimeo")?a:!1}},{key:"_getInstagramId",value:function(a){return a&&0<a.indexOf("instagram")?a:!1}},{key:"_toggleLoading",value:function(a){a?(this._$modalDialog.css("display","none"),this._$modal.removeClass("in show"),e(".modal-backdrop").append(this._config.loadingMessage)):(this._$modalDialog.css("display","block"),this._$modal.addClass("in show"),e(".modal-backdrop").find(".ekko-lightbox-loader").remove());return this}},{key:"_calculateBorders",value:function(){return{top:this._totalCssByAttribute("border-top-width"),
right:this._totalCssByAttribute("border-right-width"),bottom:this._totalCssByAttribute("border-bottom-width"),left:this._totalCssByAttribute("border-left-width")}}},{key:"_calculatePadding",value:function(){return{top:this._totalCssByAttribute("padding-top"),right:this._totalCssByAttribute("padding-right"),bottom:this._totalCssByAttribute("padding-bottom"),left:this._totalCssByAttribute("padding-left")}}},{key:"_totalCssByAttribute",value:function(a){return parseInt(this._$modalDialog.css(a),10)+
parseInt(this._$modalContent.css(a),10)+parseInt(this._$modalBody.css(a),10)}},{key:"_updateTitleAndFooter",value:function(){var a=this._$element.data("title")||"",c=this._$element.data("footer")||"";this._titleIsShown=!1;a||this._config.alwaysShowClose?(this._titleIsShown=!0,this._$modalHeader.css("display","").find(".modal-title").html(a||"&nbsp;")):this._$modalHeader.css("display","none");this._footerIsShown=!1;c?(this._footerIsShown=!0,this._$modalFooter.css("display","").html(c)):this._$modalFooter.css("display",
"none");return this}},{key:"_showYoutubeVideo",value:function(a,c){var b=this._getYoutubeId(a),d=0<a.indexOf("&")?a.substr(a.indexOf("&")):"",e=this._$element.data("width")||560,n=this._$element.data("height")||e/(560/315);return this._showVideoIframe("//www.youtube.com/embed/"+b+"?badge=0&autoplay=1&html5=1"+d,e,n,c)}},{key:"_showVimeoVideo",value:function(a,c){var b=this._$element.data("width")||500,d=this._$element.data("height")||b/(560/315);return this._showVideoIframe(a+"?autoplay=1",b,d,c)}},
{key:"_showInstagramVideo",value:function(a,c){var b=this._$element.data("width")||612,d=b+80;a="/"!==a.substr(-1)?a+"/":a;c.html('<iframe width="'+b+'" height="'+d+'" src="'+a+'embed/" frameborder="0" allowfullscreen></iframe>');this._resize(b,d);this._config.onContentLoaded.call(this);this._$modalArrows&&this._$modalArrows.css("display","none");this._toggleLoading(!1);return this}},{key:"_showVideoIframe",value:function(a,c,b,d){b=b||c;d.html('<div class="embed-responsive embed-responsive-16by9"><iframe width="'+
c+'" height="'+b+'" src="'+a+'" frameborder="0" allowfullscreen class="embed-responsive-item"></iframe></div>');this._resize(c,b);this._config.onContentLoaded.call(this);this._$modalArrows&&this._$modalArrows.css("display","none");this._toggleLoading(!1);return this}},{key:"_showHtml5Video",value:function(a,c){var b=this._$element.data("width")||560,d=this._$element.data("height")||b/(560/315);c.html('<div class="embed-responsive embed-responsive-16by9"><video width="'+b+'" height="'+d+'" src="'+
a+'" preload="auto" autoplay controls class="embed-responsive-item"></video></div>');this._resize(b,d);this._config.onContentLoaded.call(this);this._$modalArrows&&this._$modalArrows.css("display","none");this._toggleLoading(!1);return this}},{key:"_loadRemoteContent",value:function(a,c){var b=this,d=this._$element.data("width")||560,g=this._$element.data("height")||560,n=this._$element.data("disableExternalCheck")||!1;this._toggleLoading(!1);n||this._isExternal(a)?(c.html('<iframe src="'+a+'" frameborder="0" allowfullscreen></iframe>'),
this._config.onContentLoaded.call(this)):c.load(a,e.proxy(function(){return b._$element.trigger("loaded.bs.modal")}));this._$modalArrows&&this._$modalArrows.css("display","none");this._resize(d,g);return this}},{key:"_isExternal",value:function(a){a=a.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/);return"string"===typeof a[1]&&0<a[1].length&&a[1].toLowerCase()!==location.protocol||"string"===typeof a[2]&&0<a[2].length&&a[2].replace(new RegExp(":("+{"http:":80,"https:":443}[location.protocol]+
")?$"),"")!==location.host?!0:!1}},{key:"_error",value:function(a){console.error(a);this._containerToUse().html(a);this._resize(300,300);return this}},{key:"_preloadImageByIndex",value:function(a,c){if(this._$galleryItems){var b=e(this._$galleryItems.get(a),!1);if("undefined"!=typeof b){var d=b.attr("data-remote")||b.attr("href");("image"===b.attr("data-type")||this._isImage(d))&&this._preloadImage(d,!1);if(0<c)return this._preloadImageByIndex(a+1,c-1)}}}},{key:"_preloadImage",value:function(a,c){var b=
this;c=c||!1;var d=new Image;c&&function(){var g=setTimeout(function(){c.append(b._config.loadingMessage)},200);d.onload=function(){g&&clearTimeout(g);g=null;var a=e("<img />");a.attr("src",d.src);a.addClass("img-fluid");a.css("width","100%");c.html(a);b._$modalArrows&&b._$modalArrows.css("display","");b._resize(d.width,d.height);b._toggleLoading(!1);return b._config.onContentLoaded.call(b)};d.onerror=function(){b._toggleLoading(!1);return b._error(b._config.strings.fail+("  "+a))}}();d.src=a;return d}},
{key:"_swipeGesure",value:function(){if(this._touchendX<this._touchstartX)return this.navigateRight();if(this._touchendX>this._touchstartX)return this.navigateLeft()}},{key:"_resize",value:function(a,c){c=c||a;this._wantedWidth=a;this._wantedHeight=c;var b=a/c,d=this._padding.left+this._padding.right+this._border.left+this._border.right,g=575<this._config.doc.body.clientWidth?0:20,f=Math.min(a+d,this._config.doc.body.clientWidth-(575<this._config.doc.body.clientWidth?20:0),this._config.maxWidth);
a+d>f?(c=(f-d-g)/b,a=f):a+=d;f=g=0;this._footerIsShown&&(f=this._$modalFooter.outerHeight(!0)||55);this._titleIsShown&&(g=this._$modalHeader.outerHeight(!0)||67);var h=this._padding.top+this._padding.bottom+this._border.bottom+this._border.top,k=parseFloat(this._$modalDialog.css("margin-top"))+parseFloat(this._$modalDialog.css("margin-bottom"));g=Math.min(c,e(window).height()-h-k-g-f,this._config.maxHeight-h-g-f);c>g&&(a=Math.ceil(g*b)+d);this._$lightboxContainer.css("height",g);this._$modalDialog.css("flex",
1).css("maxWidth",a);if(b=this._$modal.data("bs.modal"))try{b._handleUpdate()}catch(r){b.handleUpdate()}return this}}],[{key:"_jQueryInterface",value:function(a){var c=this;a=a||{};return this.each(function(){var b=e(c);b=e.extend({},f.Default,b.data(),"object"===typeof a&&a);new f(c,b)})}}]);return f}();e.fn.ekkoLightbox=h._jQueryInterface;e.fn.ekkoLightbox.Constructor=h;e.fn.ekkoLightbox.noConflict=function(){e.fn.ekkoLightbox=m;return h._jQueryInterface};return h})(jQuery)}(jQuery);